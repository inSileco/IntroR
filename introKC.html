<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>Introduction to R</title>
    <meta charset="utf-8" />
    <meta name="author" content="Marie-Hélène Brice &amp; Kevin Cazelles" />
    <link href="assets/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link rel="stylesheet" href="assets/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/academicons-1.8.1/css/academicons.min.css">
    <link rel="stylesheet" href="inSileco.css" type="text/css" />
    <link rel="stylesheet" href="inSileco-fonts.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">








---
# Aims

---
# Outline

### &amp;nbsp; &lt;i class="fa fa-commenting-o" aria-hidden="true"&gt;&lt;/i&gt; R?
### &amp;nbsp; &lt;i class="fa fa-wrench" aria-hidden="true"&gt;&lt;/i&gt; Data manipulations ~1h
### &amp;nbsp; &lt;i class="fa fa-bar-chart" aria-hidden="true"&gt;&lt;/i&gt; Data visualization (part1) ~50min
### &amp;nbsp; &lt;i class="fa fa-cutlery" aria-hidden="true"&gt;&lt;/i&gt; Lunch break 12pm
### &amp;nbsp; &lt;i class="fa fa-bar-chart" aria-hidden="true"&gt;&lt;/i&gt; Data visualization (part2) ~30min
### &amp;nbsp; &lt;i class="fa fa-map" aria-hidden="true"&gt;&lt;/i&gt; mapping ~ 1h30
### &amp;nbsp; &lt;i class="fa fa-coffee" aria-hidden="true"&gt;&lt;/i&gt; *coffee break* 3pm
### &amp;nbsp; &lt;i class="fa fa-sitemap" aria-hidden="true"&gt;&lt;/i&gt; ordination ~1h30



---
class: inverse, center, middle

# R?

## &lt;i class="fa fa-commenting-o" aria-hidden="true"&gt;&lt;/i&gt;


---
# R

&lt;br&gt;

&gt; R is a programming language and free software environment for statistical computing and graphics [...].

&lt;br&gt;

&gt; The R language is widely used among statisticians and data miners for developing statistical software and data analysis.

[R (programming language) - Wikipedia](https://en.wikipedia.org/wiki/R_(programming_language)


---
# R is popular

.center[![:scale 85%](images/redmonk.png)]

[Python](https://www.python.org/) / [Julia](https://julialang.org/)


---
# R is popular among Biological Sciences

### For instance

1. Ecologists
2. Bioinformatics [(Bioconductor)](https://www.bioconductor.org/)
3. Medicine [&lt;i class="fa fa-external-link" aria-hidden="true"&gt;&lt;/i&gt;](https://r-medicine.com/)

--

### Why?

1. An incredible tool for statistics
2. Fairly accessible for non-programmer people
3. A very high diversity of packages


---
# R is popular

.center[![:scale 72%](https://revolution-computing.typepad.com/.a/6a010534b1db25970b01b8d2594d25970c-800wi)]

[*CRAN now has 10,000 R packages* Revolutions. January, 2017](https://blog.revolutionanalytics.com/2017/01/cran-10000.html)

[MetaCRAN](https://www.r-pkg.org/) / [R Package Documentation](https://rdrr.io/)




---
# R, RStudio, Ropenscience?

### Main links

- [R project](https://www.r-project.org/)
- [CRAN](https://cran.r-project.org/)
- [RStudio](https://www.rstudio.com/)
- [rOpenSci](https://ropensci.org)

### Get reliable documentation

- [CRAN Manual &amp; Contributed](https://cran.r-project.org/)
- [bookdown](https://bookdown.org/)
- [RStudio](https://www.rstudio.com/)
  - [Cheat Sheets](https://www.rstudio.com/resources/cheatsheets/)
  - [Webinars](https://resources.rstudio.com/webinars)
- [QCBS](https://qcbsrworkshops.github.io/Workshops/)
- [&lt;i class="fa fa-stack-overflow" aria-hidden="true"&gt;&lt;/i&gt;](https://stackoverflow.com/questions/tagged/r)




---
class: inverse, center, middle

# Data manipulation

## &lt;i class="fa fa-wrench" aria-hidden="true"&gt;&lt;/i&gt;



---
# Let's start
&lt;br&gt;

- Open R console / R GUI / RStudio / ...

--

- Install the following packages

```R
install.packages(c("tidyverse", "sf", "raster", "mapview", "vegan", "ade4",
  "scales", "xaringan"))
```

---
# R's principles
&lt;br&gt;


### 1. Everything in R is an object

### 2. Everything that happens in R is a function call

### 3. Interfaces to other software are part of R.


[Extending-R by Chambers](https://www.crcpress.com/Extending-R/Chambers/p/book/9781498775717)

---
# Everything in R is an object
&lt;br&gt;


```r
2
# [1] 2
```

--


```r
class(2)
# [1] "numeric"
```
--


```r
class("A")
# [1] "character"
class(library)
# [1] "function"
plot
# function (x, y, ...) 
# UseMethod("plot")
# &lt;bytecode: 0x55d839bdb7f8&gt;
# &lt;environment: namespace:graphics&gt;
```

---
class: center
# Everything that happens in R is a function call
&lt;br&gt;

```R
class(2)
```
## &lt;i class="fa fa-arrow-circle-o-down" aria-hidden="true"&gt;&lt;/i&gt;

### `enter`

## &lt;i class="fa fa-arrow-circle-o-down" aria-hidden="true"&gt;&lt;/i&gt;


```
# [1] "numeric"
```


---
# Interfaces to other software are part of R
&lt;br&gt;

### Four examples among many others:

- [Rcpp](https://cran.r-project.org/web/packages/Rcpp/index.html)

- [Reticulate](https://rstudio.github.io/reticulate/index.html)

- [Rmarkdown](https://rmarkdown.rstudio.com/)

- [plotly](https://plot.ly/r/)

- [mapview](https://r-spatial.github.io/mapview/)


---
# Basic commands


```r
2+2
# [1] 4
2*3
# [1] 6
3&gt;2
# [1] TRUE
```

--


```r
let &lt;- LETTERS[1:10]
let2 = LETTERS[1:10]
let
#  [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J"
let2
#  [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J"
identical(let, let2)
# [1] TRUE
```

--

```r
let3 &lt;- sample(let, 5)
let2
#  [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J"
```

--

```R
# Functions documentation
?sample
```

---
# Vectors

**Create a vector**


```r
vec &lt;- c(2:5, 9:12, 2)
vec
# [1]  2  3  4  5  9 10 11 12  2
vec &gt; 4
# [1] FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE
```

--


```r
let
#  [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J"
length(let)
# [1] 10
```
--

**Subset a vector**


```r
let[1:2]
# [1] "A" "B"
let[c(1:2, 5:6)]
# [1] "A" "B" "E" "F"
let[-c(1,7)]
# [1] "B" "C" "D" "E" "F" "H" "I" "J"
vec[vec &gt; 4]
# [1]  5  9 10 11 12
let[let &gt; "C"]
# [1] "D" "E" "F" "G" "H" "I" "J"
```

---
# Matrices


```r
# use arguments
mat &lt;- matrix(1:18, ncol = 3, nrow = 6)
mat
#      [,1] [,2] [,3]
# [1,]    1    7   13
# [2,]    2    8   14
# [3,]    3    9   15
# [4,]    4   10   16
# [5,]    5   11   17
# [6,]    6   12   18
mat[1,2]
# [1] 7
```
--


```r
mat[1,]
# [1]  1  7 13
mat[,2]
# [1]  7  8  9 10 11 12
mat[2:4, 1:2]
#      [,1] [,2]
# [1,]    2    8
# [2,]    3    9
# [3,]    4   10
```

---
# Data frames

## &amp;nbsp; &amp;nbsp; &lt;i class="fa fa-question-circle-o" aria-hidden="true"&gt;&lt;/i&gt;

--


```r
df &lt;- data.frame(
  letter = let[1:5],
  val = vec[1:5],
  logic = vec[1:5]&gt;2
)
df
#   letter val logic
# 1      A   2 FALSE
# 2      B   3  TRUE
# 3      C   4  TRUE
# 4      D   5  TRUE
# 5      E   9  TRUE
class(df)
# [1] "data.frame"
```

---
# Data frames


```r
df[1, 1]
# [1] "A"
```


```r
df$letter
# [1] "A" "B" "C" "D" "E"
df[,1]
# [1] "A" "B" "C" "D" "E"
df[1]
#   letter
# 1      A
# 2      B
# 3      C
# 4      D
# 5      E
df[1:2]
#   letter val
# 1      A   2
# 2      B   3
# 3      C   4
# 4      D   5
# 5      E   9
```


```r
class(df$letter)
# [1] "character"
class(df$val)
# [1] "numeric"
```

---
# Data frames
&lt;br&gt;


```r
library(datasets)
```

To see the list of available datasets:

```R
data()
```

To access the documentation of a particular dataset:

```R
?CO2
```


---
# Data frames


```r
library(datasets)
head(CO2)
# Grouped Data: uptake ~ conc | Plant
#   Plant   Type  Treatment conc uptake
# 1   Qn1 Quebec nonchilled   95   16.0
# 2   Qn1 Quebec nonchilled  175   30.4
# 3   Qn1 Quebec nonchilled  250   34.8
# 4   Qn1 Quebec nonchilled  350   37.2
# 5   Qn1 Quebec nonchilled  500   35.3
# 6   Qn1 Quebec nonchilled  675   39.2
names(CO2)
# [1] "Plant"     "Type"      "Treatment" "conc"      "uptake"
summary(CO2)
#      Plant             Type         Treatment       conc     
#  Qn1    : 7   Quebec     :42   nonchilled:42   Min.   :  95  
#  Qn2    : 7   Mississippi:42   chilled   :42   1st Qu.: 175  
#  Qn3    : 7                                    Median : 350  
#  Qc1    : 7                                    Mean   : 435  
#  Qc3    : 7                                    3rd Qu.: 675  
#  Qc2    : 7                                    Max.   :1000  
#  (Other):42                                                  
#      uptake     
#  Min.   : 7.70  
#  1st Qu.:17.90  
#  Median :28.30  
#  Mean   :27.21  
#  3rd Qu.:37.12  
#  Max.   :45.50  
# 
```

--


```r
CO2$Plant
#  [1] Qn1 Qn1 Qn1 Qn1 Qn1 Qn1 Qn1 Qn2 Qn2 Qn2 Qn2 Qn2 Qn2 Qn2 Qn3 Qn3 Qn3
# [18] Qn3 Qn3 Qn3 Qn3 Qc1 Qc1 Qc1 Qc1 Qc1 Qc1 Qc1 Qc2 Qc2 Qc2 Qc2 Qc2 Qc2
# [35] Qc2 Qc3 Qc3 Qc3 Qc3 Qc3 Qc3 Qc3 Mn1 Mn1 Mn1 Mn1 Mn1 Mn1 Mn1 Mn2 Mn2
# [52] Mn2 Mn2 Mn2 Mn2 Mn2 Mn3 Mn3 Mn3 Mn3 Mn3 Mn3 Mn3 Mc1 Mc1 Mc1 Mc1 Mc1
# [69] Mc1 Mc1 Mc2 Mc2 Mc2 Mc2 Mc2 Mc2 Mc2 Mc3 Mc3 Mc3 Mc3 Mc3 Mc3 Mc3
# 12 Levels: Qn1 &lt; Qn2 &lt; Qn3 &lt; Qc1 &lt; Qc3 &lt; Qc2 &lt; Mn3 &lt; Mn2 &lt; Mn1 &lt; ... &lt; Mc1
```


---
# Lists


```r
mylist &lt;- list(CO2 = CO2, mymat = mat, mylet = let[1], awesome = "cool")
names(mylist)
# [1] "CO2"     "mymat"   "mylet"   "awesome"
mylist$awesome
# [1] "cool"
mylist[3:4]
# $mylet
# [1] "A"
# 
# $awesome
# [1] "cool"
```

--


```r
class(mylist[2])
# [1] "list"
class(mylist[[2]])
# [1] "matrix"
mylist[[2]]
#      [,1] [,2] [,3]
# [1,]    1    7   13
# [2,]    2    8   14
# [3,]    3    9   15
# [4,]    4   10   16
# [5,]    5   11   17
# [6,]    6   12   18
class(mylist[[2]][2,3])
# [1] "integer"
mylist[[2]][2,3]
# [1] 14
```


---
# For loops


```r
for (i in 1:4) {
  # actions
  print(i)
}
# [1] 1
# [1] 2
# [1] 3
# [1] 4
```


```r
for (j in LETTERS[1:5]) {
  print(j)
}
# [1] "A"
# [1] "B"
# [1] "C"
# [1] "D"
# [1] "E"
```


```r
for (i in c(1,4,6)) {
  print(i)
}
# [1] 1
# [1] 4
# [1] 6
```


---
# Logical conditions &amp;nbsp; &gt; &amp;nbsp; &gt;= &amp;nbsp; &lt; &amp;nbsp; &lt;= &amp;nbsp; == &amp;nbsp; !=

--


```r
vec &lt;- c(2:5, 9:12, 2)
vec
# [1]  2  3  4  5  9 10 11 12  2
vec[1] &gt; 4
# [1] FALSE
vec &gt; 4
# [1] FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE
```

--

`if` ... `else` ...


```r
for (i in vec) {
  if (i &lt;= 5) {
   # actions
   print(i)
 } else {
   print("nope")
 }
}
# [1] 2
# [1] 3
# [1] 4
# [1] 5
# [1] "nope"
# [1] "nope"
# [1] "nope"
# [1] "nope"
# [1] 2
```




---
class: inverse, center, middle

# Questions?

## &lt;i class="fa fa-question-circle-o" aria-hidden="true"&gt;&lt;/i&gt;


---
# Tidyverse - a metapackage

&lt;br&gt;



```r
library(tidyverse)
```

### &lt;i class="fa fa-wrench" aria-hidden="true"&gt;&lt;/i&gt; A great tool belt for data science [&lt;i class="fa fa-external-link" aria-hidden="true"&gt;&lt;/i&gt;](https://www.tidyverse.org/)

--

- &lt;i class="fa fa-check" aria-hidden="true"&gt;&lt;/i&gt; Pros:
  - well-documented, intuitive
  - efficient
  - very popular

- &lt;i class="fa fa-exclamation-triangle" aria-hidden="true"&gt;&lt;/i&gt;Cons:
  - an alternative way of doing the same manipulation things
  - prevents the user from learning programming basics


---
# Tidyverse - what will be used and covered



---
# Basic data manipulations

0. Read files

1. Filter

2. Select

3. Mutate

4. Aggregate

5. Joint

6. figure / write files



---
# Read a file

read.csv
readr::read_csv

read.table
package to connect to sql, mongodb,
XXX fchier speciaux geol??



---
# ade4


```r
library(ade4)
df &lt;- data(doubs)
```

---
# Piping


---
# Filter

---
# Select

---
# Mutate

---
# Aggregate

---
# Joint

---
# Write files







---
class: inverse, center, middle

# Data visualization

## &lt;i class="fa fa-bar-chart" aria-hidden="true"&gt;&lt;/i&gt;


---
# graphics, grid and more



---
# ggplot2


---
# What's the big idea

1. grammar of graohics

2. yourplot &lt;- gg_XX1 + gg_XX2 + gg_XX3

3. new plots? Code a new gg_XXX



---
# histograms


---
# pie chart

---
# get circular
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="inSileco-macros.js"></script>
<script>var slideshow = remark.create({
"highlightLines": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
